<!doctype html>
<html lang="en">
  <!--
       The MIT License (MIT)

       Copyright (c) 2015 Tom Panning

       Permission is hereby granted, free of charge, to any person obtaining a copy
       of this software and associated documentation files (the "Software"), to deal
       in the Software without restriction, including without limitation the rights
       to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
       copies of the Software, and to permit persons to whom the Software is
       furnished to do so, subject to the following conditions:

       The above copyright notice and this permission notice shall be included in
       all copies or substantial portions of the Software.

       THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
       IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
       FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
       AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
       LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
       OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
       THE SOFTWARE.
     -->
  <head>
    <meta charset="utf-8">

    <style> .shell { color:aqua; } </style>
    <title>
      Using git effectively (Intermediate -> Advanced git)
      -- Tuesday Aug 16, 2016
    </title>
    <meta name="author" content="Edgar Aroutiounian">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
    <link rel="stylesheet"
    href="http://cdn.jsdelivr.net/reveal.js/3.0.0/css/reveal.min.css">
    <link rel="stylesheet"
    href="http://cdn.jsdelivr.net/reveal.js/3.0.0/css/theme/black.css"
    id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet"
    href="http://cdn.jsdelivr.net/reveal.js/3.0.0/lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
     var link = document.createElement( 'link' );
     link.rel = 'stylesheet';
     link.type = 'text/css';
     link.href = window.location.search.match( /print-pdf/gi )
	      ?  'http://cdn.jsdelivr.net/reveal.js/3.0.0/css/print/pdf.css'
	       : 'http://cdn.jsdelivr.net/reveal.js/3.0.0/css/print/paper.css';
     document.getElementsByTagName('head')[0].appendChild( link );
    </script>

    <!--[if lt IE 9]>
      <script src="http://cdn.jsdelivr.net/reveal.js/3.0.0/lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
	<section>
	  <h3>Ginosi</h3>
	  <p>
	    Using git effectively (Intermediate -> Advanced git)
	  </p>
	  <p>
	    <small>
	      By
	      <a href="http://twitter.com/edgararout">@edgararout</a>,
	      <a href="http://facebook.com/edgar.aroutiounian">facebook</a>
	    </small>
	  </p>
	</section>

        <section style="font-size:1.4rem;">
	  <h1> About Me</h1>
	  <p> 
	    My name is Edgar Aroutiounian, I'm a programmer from San
	    Francisco/Silicon Valley 
	  </p>
	  <ul>
	    <li> I've been programming for four years.</li>
	    
	    <li> 
	      I started by teaching myself, worked in industry, then
	      attended Columbia University at the graduate level for
	      some missing theory.
	    </li>

	    <li> 
	      I code professionally in several languages, C/C++,
	      OCaml, Python, Objective-C, JavaScript, shell-scripting,
	      etc. Basically whatever they pay me for.

	      (My favorite language is OCaml, advanced language, talk
	      to me if you're curious about functional programming)
	    </li>

	    <li>
	      I have a lot of experience in open-source work, I
	      usually code every waking moment I have.
	    </li>

	    <li> 
	      I came to Armenia to share my experience and
	      abilities with you, you can see my website and
	      resume at <a href="http://hyegar.com">hyegar.com</a>,
	      its a blog generated by Haskell code.
	    </li>

	  </ul>
        </section>

        <section style="font-size:1.4rem;">
	  <h1> Just so that we're on the same page... </h1>
	  <ul>
	    <li>
	      <code class="shell">git</code> is a command line tool
	      written in C89 C, it uses <code class="shell">libgit</code> while
	      big projects like github.com use <code class="shell">libgit2</code>
	    </li>

	    <li>
	      <code class="shell">git</code> has won the mindshare of
	      open-source programmers, and most programmers in
	      general. Most companies of any serious meddle expect a minimial
	      level of proficiency in your <code class="shell">git</code> knowledge,
	      although the Bay Area probably expects more than
	      Armenia.
	    </li>

	    <li>
	      <code class="shell">git</code> was created by Linus
	      Torvalds because existing version control software was
	      centralized, and this is very problematic for large
	      projects like the Linux kernel
	    </li>

	    <li>
	      The only other serious contender is <code class="shell">mercurial</code> with
	      some very notable users like Facebook. There are reasons for this,
	      we will get into it at the end hopefully
	      (Hint: even <code class="shell">git</code> has some
	      shortcomings)
	    </li>

	    <li>
	      Effective usage requires many hundreds of hours of
	      reading through the man pages, but it is very well worth
	      it. One of the best Unix tools ever created, perfect
	      example of the Unix philosophy.
	    </li>

	    <li>
	      <code class="shell">git</code> doesn't know anything as
	      to the structure of your data, it stores everything as a
	      binary blog and references things in a tree like data
	      structure. Commits are effectively just pointers. Look at
	      <code class="shell">libgit2</code> source code, its very readable.
	    </li>

	  </ul>
        </section>
        <section style="font-size:1.4rem;">
	  <h1> Be honest now </h1>
	  <p>
	    Raise your hand if you've <em>ever</em> been guilty of this
	  </p>
	  <pre>
	    <!-- 1. Indiscrimate adding of code,
		 2. Past tense beginning of commit message
		 3. Useless commit message
	       -->
	    <code class="shell">
$ git add .
$ git commit -am 'Added more code'
	    </code>
	  </pre>
	  <p>
	    Whats wrong with this picture? (Hint: at least two things)
	  </p>

	  <h3> Or...</h3>
	  <pre>
	    <!-- 1. Indiscrimate adding of code,
		 2. Past tense beginning of commit message
		 3. Useless commit message
	       -->
	    <code class="shell">
$ git reset --hard origin/master
	    </code>
	  </pre>

        </section>

        <section>

          <h6> How do we use <code class="shell">git</code> effectively? </h6>

	  <small>
	    <p>
	      Start by mastering the fundamentals (always read the man
	      pages, each one of these has their own man-page). I
	      basically use these commands every day and each one has
	      flags that modify behavior, (Hint: adding some extra flags
	      makes these commands all that much more powerful)
	    </p>
	  </small>
	  <ol style="list-style-type:none">
	    <li>
	      <code class="shell">$ git add </code>
	    </li>

	    <li>
	      <code class="shell">$ git reset </code>
	    </li>

	    <li>
	      <code class="shell">$ git checkout </code>
	    </li>

	    <li>
	      <code class="shell">$ git log </code>
	    </li>

	    <li>
	      <code class="shell">$ git show </code>
	    </li>

	    <li>
	      <code class="shell">$ git remote </code>
	    </li>

	    <li>
	      <code class="shell">$ git clone </code>
	    </li>

	    <li>
	      <code class="shell">$ git commit </code>
	    </li>

	    <li>
	      <code class="shell">$ git stash </code>
	    </li>

	    <li>
	      <code class="shell">$ git diff </code>
	    </li>

	    <li>
	      <code class="shell">$ git branch </code>
	    </li>
	  </ol>
        </section>

	<section>
	  <h6> git flow for the product managers </h6>
	  <small>
	    <p>
	      The central point of git is that branching is cheap and
	      is effectively just a pointer, previous version control
	      systems made branching and merging code extremely
	      painful and expensive. No one should be coding directly
	      on master; moreover, since branching is cheap, create a
	      branch for every feature/bug ticket. Code should only go
	      into master when it is finished and correct.
	    </p>
	  </small>
	  <p>
	    If you use Jira for tickets and Jira knows about your
	    github accounts, then naming the branches like:
	  </p>
	  
	  <pre>
	    <code class="shell">DEV-1481 Fix buy button on checkout cart </code>
	  </pre>
	  Will automagically hook up to Jira. Github also has some
	  neat tricks like if you say something like
	  <pre>
	    <code class="shell">Closes issue 1450 </code>
	  </pre>
	  in the commit message, then github will parse the commit
	  message and close the corresponding github issue.

	</section>
	
	<section>
	  <h6> git flow/knowledge for the programmers </h6>
	  <small>
	    <ul>
	      <li>
		master and origin are just names, nothing special about
		them. master is just another branch and origin is just
		another computer.
	      </li>

	      <li>
		Use branches for bug fixes, features. Basically for any
		singular idea of work.
	      </li>

	      <li>
		Keep commits singular focused, separate commits for
		separate issues.
	      </li>

	      <li>
		No whitespace in commits. If you need/want to do a
		single whitespace commit on master, then rebase.
	      </li>

	      <li>
		Learn how to write good commit messages. (Hint: a good
		commit message is written in the present tense and
		clearly describes what work was done)
	      </li>

	      <li>
		Rebase off of master when you come into work in the
		morning, avoid trivial merges. A merge is a commit that
		represents a completed unit of work, not something that
		happens because you don't know how to use git.
	      </li>

	      <li>
		Avoid long running branches, if you're on it for
		longer than two weeks, then something is probably
		wrong. (if you need to be on a long running branch, then learn
		about <code class="shell">git rerere</code>)
	      </li>

	      <li>
		if you use <code class="shell">emacs</code> like I do,
		then learn about <code class="shell">magit</code>
	      </li>

	      <li>
		Work in progress commits are okay on your branch but
		shouldn't exist on master. Squash your commits when
		you merge your branch into master.
	      </li>

	      <li>
		<code class="shell">HEAD</code> is just a symbolic name
		for the latest current commit, so if you change branches,
		then you are changing <code class="shell">HEAD</code>
	      </li>

	      <li>
		Since <code class="shell">HEAD</code> is just a symbolic name, then doing
		<code class="shell">HEAD~4</code> means the commit
		from 4 behind the current one.
	      </li>
	    </ul>
	  </small>
	</section>

	<section>
	  <h6>Git aliases </h6>
	  <p> Eventually writing out git commands becomes tedious, use aliases! </p>

	  <p>Here's my <code class="shell">~/.gitconfig</code></p>

	  <pre>
	    <code class="shell">
# This is Git's per-user configuration file.
[user]
	name = Edgar Aroutiounian
	email = edgar.factorial@gmail.com
[credential]
	helper = osxkeychain
[push]
	default = simple
[core]
	editor = /usr/local/opt/emacs/Emacs.app/Contents/MacOS/Emacs
[alias]
	cp = cherry-pick
	s = status
	b = branch
	d = diff
	co = checkout
	r = reset --hard
[filter "lfs"]
	clean = git-lfs clean %f
	smudge = git-lfs smudge %f
	required = true
	    </code>
	  </pre>

	</section>

	<section>
	  <h6>More advanced commands of git</h6>
	  <ol style="list-style-type:none">
	    <li>
	      <code class="shell">$ git rebase </code>
	    </li>

	    <li>
	      <code class="shell">$ git cherrypick </code>
	    </li>

	    <li>
	      <code class="shell">$ git rerere </code>
	    </li>

	    <li>
	      <code class="shell">$ git grep </code>
	    </li>

	    <li>
	      <code class="shell">$ git reflog </code>
	    </li>

	    <li>
	      <code class="shell">$ git submodule </code>
	    </li>

	    <li>
	      <code class="shell">$ git subtree </code>
	    </li>
	  </ol>

	</section>

	<section>
	  <h6>Some of my favorites...</h6>
	  <small>
	    <ol style="list-style-type:none">
	      <li>
		<code class="shell">$ git commit -a --amend </code>
	      </li>
	      <li>
		<code class="shell">$ git rebase -i </code>
	      </li>
	      <li>
		<code class="shell">$ git clean -f -d -x </code>
	      </li>
	      <li>
		<code class="shell">$ git fetch --depth 100 </code>
	      </li>
	      <li>
		<code class="shell">$ git diff origin/master --name-only </code>
	      </li>
	      <li>
		<code class="shell">$ git push -f </code>
	      </li>
	      <li>
		<code class="shell">$ git reset --hard HEAD~4 </code>
	      </li>
	      <li>
		<code class="shell">$ git diff --stat </code>
	      </li>
	      <li>
		<code class="shell">$ git stash show -p </code>
	      </li>
	      <li>
		<code class="shell">$ git checkout HEAD -- foo/bar.html </code>
	      </li>

	      <li>
		<code class="shell">$ git checkout -b test origin/test </code>
	      </li>

	      <li>
		<code class="shell">$ git showlog -s -n </code>
	      </li>

	      <li>
		<code class="shell">$ git show 2fce800e~1:src/foo.js > that_version.js </code>
	      </li>
	      <li>
		<code class="shell">$ git diff HEAD..2fc800~2 something.js </code>
	      </li>
	      <li>
		<code class="shell">$ git config status.showuntrackedfiles no </code>
	      </li>
	      <li>
		<code class="shell">$ git push origin :v0.1 </code>
	      </li>
	    </ol>
	  </small>
	</section>

	<section>
	  <h3>Some shortcomings of <code class="shell">git</code></h3>

	  <ul>
	    <li>
	      High initial learning curve.
	    </li>

	    <li>
	      Because <code class="shell">git</code> keeps everything
	      as a binary blob, it doesn't track file movement.
	    </li>

	    <li>
	      again, because everything is just a binary blob, there is
	      no structure to the data. So don't try to abuse git as an
	      ad-hoc database (Although some advanced
	      <code class="shell">OCaml</code> projects like Irmin are
	      able to get away with this.)
	    </li>

	    <li>
	      <code class="shell">git</code> is also bad with projects
	      whose structure has a big fan out, although the only
	      example I've ever seen of this was
	      the <code class="shell">CocoaPods</code> snafu.
	    </li>

	    <li>
	      Adding dependent project is a pain and error prone,
	      <code class="shell">submodules</code> and
	      <code class="shell">subtrees</code> require extra
	      thought.
	    </li>

	  </ul>
	</section>

	<section>
	  Questions?
	</section>

      </div>
    </div>

    <script src="http://cdn.jsdelivr.net/reveal.js/3.0.0/lib/js/head.min.js"></script>
    <script src="http://cdn.jsdelivr.net/reveal.js/3.0.0/js/reveal.min.js"></script>

    <script>
     // Full list of configuration options available at:
     // https://github.com/hakimel/reveal.js#configuration
     Reveal.initialize({
       controls: true,
       progress: true,
       history: true,
       center: true,
       transition: 'slide', // none/fade/slide/convex/concave/zoom
       // Optional reveal.js plugins
       dependencies: [
	 { src: 'http://cdn.jsdelivr.net/reveal.js/3.0.0/lib/js/classList.js',
	   condition: function() { return !document.body.classList; } },
	 { src: 'http://cdn.jsdelivr.net/reveal.js/3.0.0/plugin/markdown/marked.js',
	   condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
	 { src: 'http://cdn.jsdelivr.net/reveal.js/3.0.0/plugin/markdown/markdown.js',
	   condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
	 { src: 'http://cdn.jsdelivr.net/reveal.js/3.0.0/plugin/highlight/highlight.js',
	   async: true,
	   condition: function() { return !!document.querySelector( 'pre code' ); },
	   callback: function() { hljs.initHighlightingOnLoad(); } },
	 { src: 'http://cdn.jsdelivr.net/reveal.js/3.0.0/plugin/zoom-js/zoom.js', async: true },
	 { src: 'http://cdn.jsdelivr.net/reveal.js/3.0.0/plugin/notes/notes.js', async: true }
       ]
     });
    </script>
  </body>
</html>
